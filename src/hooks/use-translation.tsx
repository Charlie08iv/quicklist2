
import React, { createContext, useState, useContext, useCallback } from 'react';

// Define available languages and translations
const languages = {
  en: {
    // Base translations
    lists: "Lists",
    recipes: "Recipes", 
    groups: "Groups",
    profile: "Profile",
    settings: "Settings",
    breakfast: "Breakfast",
    lunch: "Lunch",
    dinner: "Dinner",
    shopping_list: "Shopping List",
    today: "Today",
    searchRecipes: "Search recipes...",
    ingredients: "Ingredients",
    instructions: "Instructions",
    prepTime: "Prep Time",
    cookTime: "Cook Time",
    addToList: "Add to List",
    createGroup: "Create Group",
    joinGroup: "Join Group",
    members: "Members",
    lightMode: "Light Mode",
    darkMode: "Dark Mode",
    language: "Language",
    login: "Login",
    signup: "Sign up",
    logout: "Log out",
    notifications: "Notifications",
    share: "Share",
    sharedWith: "Shared with",
    createRecipe: "Create Recipe",
    createList: "Create List",
    connectionIssue: "Unable to connect to the server",
    tryAgain: "Try Again",
    refresh: "Refresh",
    emptyList: "No items in this list yet",
    itemsCompleted: "items completed",
    No_shopping_lists: "No shopping lists",
    No_archived_lists: "No archived lists",
    disableNotifications: "Disable Notifications",
    enableNotifications: "Enable Notifications",
    shareList: "Share list",
    sortBy: "Sort by",
    categories: "Categories",
    alphabetically: "Alphabetically",
    custom: "Custom",
    showPrices: "Show prices",
    uncheckAllItems: "Uncheck all items",
    manageList: "Manage List",
    itemsUnchecked: "All items have been unchecked",
    itemsSorted: "Items have been sorted",
    priceDisplay: "Price display has been toggled",
    listSorted: "List sorted",
    pricesToggled: "Prices toggled",
    feedback: "Feedback",
    sendFeedback: "Send Feedback",
    general: "General",
    rateTheApp: "Rate the app!",
    reportProblem: "Report a problem/feedback",
    openLastUsed: "Open last used list",
    keepScreenOn: "Keep the screen on",
    switchTo: "Switch to",
    mode: "mode",
    myLists: "My Lists",
    archived: "Archived",
    error: "Error",
    listNotFound: "List not found",
    listDoesNotExist: "The list you're looking for doesn't exist or has been deleted",
    failedToLoadList: "Failed to load list details",
    itemAdded: "Item added",
    newItemAdded: "New item has been added to your list",
    itemRemoved: "Item removed",
    itemHasBeenRemoved: "Item has been removed from your list",
    failedToAddItem: "Failed to add item",
    failedToRemoveItem: "Failed to remove item",
    failedToUpdateItem: "Failed to update item",
    itemUpdated: "Item updated",
    itemHasBeenUpdated: "Item has been updated",
    itemsAlphabetically: "Items have been sorted alphabetically",
    itemsByCategory: "Items have been sorted by category",
    customSorting: "Switched to custom sorting mode",
    profilePictureUpdated: "Profile picture updated",
    profilePictureSuccess: "Your profile picture has been successfully updated.",
    shareApp: "Share app",
    supportAndFeedback: "Support and feedback",
    privacyPolicy: "Privacy Policy",
    thankYou: "Thank you!",
    ratingSoon: "Rating functionality will be implemented soon.",
    success: "Success",
    thanksForSharing: "Thanks for sharing!",
    linkCopied: "Link copied!",
    appLinkCopied: "The app link has been copied to your clipboard",
    couldntShare: "Couldn't share",
    tryToCopy: "Please try copying the link instead",
    account: "Account",
    "My Lists": "My Lists",
    "Archived": "Archived",
    "List created": "List created",
    "Your new shopping list has been created": "Your new shopping list has been created",
    "Failed to create list": "Failed to create list",
    "Please try again later": "Please try again later",
    "Create New List": "Create New List",
    "List Name": "List Name",
    "Enter list name": "Enter list name",
    "Cancel": "Cancel",
    "Creating": "Creating",
    "Create": "Create",
    "New List": "New List",
    "Tell us what you think...": "Tell us what you think...",
    "Sending...": "Sending...",
    "Items unchecked": "Items unchecked",
    "Failed to uncheck items": "Failed to uncheck items",
    "Failed to move item": "Failed to move item",
    "The shopping list you're looking for doesn't exist or has been deleted.": "The shopping list you're looking for doesn't exist or has been deleted.",
    "Check out this awesome grocery list app!": "Check out this awesome grocery list app!",
    "addMeal": "Add Meal",
    "addMealFor": "Add Meal for",
    "mealName": "Meal Name",
    "mealType": "Meal Type",
    "saving": "Saving",
    "saveMeal": "Save Meal",
    
    // ListItemManager translations
    "Item Name": "Item Name",
    "Enter item name": "Enter item name",
    "Quantity": "Quantity",
    "Unit": "Unit",
    "Category": "Category",
    "Add Item": "Add Item",
    "Price": "Price",
    "Enter price (optional)": "Enter price (optional)",
    "Done": "Done",
    "Select unit": "Select unit",
    "Select category": "Select category",
    "Items": "Items",
    "All Items (Alphabetical)": "All Items (Alphabetical)",
    "Custom Order": "Custom Order",
    
    // Category translations
    "Produce": "Produce",
    "Dairy": "Dairy",
    "Meat": "Meat",
    "Bakery": "Bakery",
    "Frozen Foods": "Frozen Foods",
    "Canned Goods": "Canned Goods",
    "Dry Goods": "Dry Goods",
    "Beverages": "Beverages",
    "Spices": "Spices",
    "Snacks": "Snacks",
    "Household": "Household", 
    "Other": "Other",
    
    // Unit
    "pcs": "pcs",
    
    // Recipe page
    "myRecipes": "My Recipes",
    "inspiration": "Inspiration",
    "noPersonalRecipes": "No Personal Recipes",
    "createYourFirstRecipe": "Create your first recipe",
    
    // Groups page
    "Your Groups": "Your Groups",
    "Lists": "Lists",
    "Chat": "Chat",
    "Invite": "Invite",
    
    // Account page
    "Edit Name": "Edit Name",
    "Change Email": "Change Email",
    "Change Password": "Change Password",
    "Log Out": "Log Out",
    "Delete Account": "Delete Account"
  },
  sv: {
    // Base translations
    lists: "Listor",
    recipes: "Recept", 
    groups: "Grupper",
    profile: "Profil",
    settings: "Inställningar",
    breakfast: "Frukost",
    lunch: "Lunch",
    dinner: "Middag",
    shopping_list: "Inköpslista",
    today: "Idag",
    searchRecipes: "Sök recept...",
    ingredients: "Ingredienser",
    instructions: "Instruktioner",
    prepTime: "Förberedelsetid",
    cookTime: "Tillagningstid",
    addToList: "Lägg till i lista",
    createGroup: "Skapa grupp",
    joinGroup: "Gå med i grupp",
    members: "Medlemmar",
    lightMode: "Ljust läge",
    darkMode: "Mörkt läge",
    language: "Språk",
    login: "Logga in",
    signup: "Registrera dig",
    logout: "Logga ut",
    notifications: "Notiser",
    share: "Dela",
    sharedWith: "Delad med",
    createRecipe: "Skapa recept",
    createList: "Skapa lista",
    connectionIssue: "Kan inte ansluta till servern",
    tryAgain: "Försök igen",
    refresh: "Uppdatera",
    emptyList: "Denna lista har inga varor än",
    itemsCompleted: "varor klara",
    No_shopping_lists: "Inga inköpslistor",
    No_archived_lists: "Inga arkiverade listor",
    disableNotifications: "Inaktivera aviseringar",
    enableNotifications: "Aktivera aviseringar",
    shareList: "Dela lista",
    sortBy: "Sortera efter",
    categories: "Kategorier",
    alphabetically: "Alfabetiskt",
    custom: "Anpassad",
    showPrices: "Visa priser",
    uncheckAllItems: "Avmarkera alla varor",
    manageList: "Hantera lista",
    itemsUnchecked: "Alla varor har avmarkerats",
    itemsSorted: "Varorna har sorterats",
    priceDisplay: "Prisvisning har växlats",
    listSorted: "Lista sorterad",
    pricesToggled: "Priser växlade",
    feedback: "Feedback",
    sendFeedback: "Skicka feedback",
    general: "Allmänt",
    rateTheApp: "Betygsätt appen!",
    reportProblem: "Rapportera ett problem/feedback",
    openLastUsed: "Öppna senast använda listan",
    keepScreenOn: "Håll skärmen på",
    switchTo: "Byt till",
    mode: "läge",
    myLists: "Mina listor",
    archived: "Arkiverade",
    error: "Fel",
    listNotFound: "Lista hittades inte",
    listDoesNotExist: "Listan du letar efter finns inte eller har raderats",
    failedToLoadList: "Kunde inte ladda listdetaljer",
    itemAdded: "Vara tillagd",
    newItemAdded: "Ny vara har lagts till i din lista",
    itemRemoved: "Vara borttagen",
    itemHasBeenRemoved: "Varan har tagits bort från din lista",
    failedToAddItem: "Kunde inte lägga till vara",
    failedToRemoveItem: "Kunde inte ta bort vara",
    failedToUpdateItem: "Kunde inte uppdatera vara",
    itemUpdated: "Vara uppdaterad",
    itemHasBeenUpdated: "Varan har uppdaterats",
    itemsAlphabetically: "Varorna har sorterats alfabetiskt",
    itemsByCategory: "Varorna har sorterats efter kategori",
    customSorting: "Bytt till anpassat sorteringsläge",
    profilePictureUpdated: "Profilbild uppdaterad",
    profilePictureSuccess: "Din profilbild har uppdaterats.",
    shareApp: "Dela app",
    supportAndFeedback: "Support och feedback",
    privacyPolicy: "Integritetspolicy",
    thankYou: "Tack!",
    ratingSoon: "Betygsfunktionen kommer snart.",
    success: "Lyckades",
    thanksForSharing: "Tack för att du delar!",
    linkCopied: "Länk kopierad!",
    appLinkCopied: "Applänken har kopierats till urklipp",
    couldntShare: "Kunde inte dela",
    tryToCopy: "Försök att kopiera länken istället",
    account: "Konto",
    "My Lists": "Mina listor",
    "Archived": "Arkiverade",
    "List created": "Lista skapad",
    "Your new shopping list has been created": "Din nya inköpslista har skapats",
    "Failed to create list": "Kunde inte skapa lista",
    "Please try again later": "Försök igen senare",
    "Create New List": "Skapa ny lista",
    "List Name": "Listnamn",
    "Enter list name": "Ange listnamn",
    "Cancel": "Avbryt",
    "Creating": "Skapar",
    "Create": "Skapa",
    "New List": "Ny lista",
    "Tell us what you think...": "Berätta vad du tycker...",
    "Sending...": "Skickar...",
    "Items unchecked": "Varor avmarkerade",
    "Failed to uncheck items": "Kunde inte avmarkera varor",
    "Failed to move item": "Kunde inte flytta varan",
    "The shopping list you're looking for doesn't exist or has been deleted.": "Inköpslistan du letar efter finns inte eller har raderats",
    "Check out this awesome grocery list app!": "Kolla in den här fantastiska inköpslisteappen!",
    "addMeal": "Lägg till måltid",
    "addMealFor": "Lägg till måltid för",
    "mealName": "Måltidsnamn",
    "mealType": "Måltidstyp",
    "saving": "Sparar",
    "saveMeal": "Spara måltid",
    
    // ListItemManager translations
    "Item Name": "Varunamn",
    "Enter item name": "Ange varunamn",
    "Quantity": "Antal",
    "Unit": "Enhet",
    "Category": "Kategori",
    "Add Item": "Lägg till vara",
    "Price": "Pris",
    "Enter price (optional)": "Ange pris (valfritt)",
    "Done": "Klar",
    "Select unit": "Välj enhet",
    "Select category": "Välj kategori",
    "Items": "Varor",
    "All Items (Alphabetical)": "Alla varor (alfabetiskt)",
    "Custom Order": "Anpassad ordning",
    
    // Category translations
    "Produce": "Grönsaker",
    "Dairy": "Mejeri",
    "Meat": "Kött",
    "Bakery": "Bageri",
    "Frozen Foods": "Frysvaror",
    "Canned Goods": "Konserver",
    "Dry Goods": "Torrvaror",
    "Beverages": "Drycker",
    "Spices": "Kryddor",
    "Snacks": "Snacks",
    "Household": "Hushåll",
    "Other": "Övrigt",
    
    // Unit
    "pcs": "st",
    
    // Recipe page
    "myRecipes": "Mina recept",
    "inspiration": "Inspiration",
    "noPersonalRecipes": "Inga personliga recept",
    "createYourFirstRecipe": "Skapa ditt första recept",
    
    // Groups page
    "Your Groups": "Dina grupper",
    "Lists": "Listor",
    "Chat": "Chatt",
    "Invite": "Bjud in",
    
    // Account page
    "Edit Name": "Redigera namn",
    "Change Email": "Byt e-post",
    "Change Password": "Byt lösenord",
    "Log Out": "Logga ut",
    "Delete Account": "Radera konto"
  }
};

export type LanguageCode = 'en' | 'sv';
type TranslationContextType = {
  language: LanguageCode;
  setLanguage: (lang: LanguageCode) => void;
  t: (key: string) => string;
};

const TranslationContext = createContext<TranslationContextType | undefined>(undefined);

export const TranslationProvider = ({ children }: { children: React.ReactNode }) => {
  // Set Swedish as the default language
  const [language, setLanguage] = useState<LanguageCode>('sv');
  
  const t = useCallback((key: string): string => {
    const translations = languages[language];
    return (translations as Record<string, string>)[key] || key;
  }, [language]);

  return (
    <TranslationContext.Provider value={{ language, setLanguage, t }}>
      {children}
    </TranslationContext.Provider>
  );
};

export const useTranslation = () => {
  const context = useContext(TranslationContext);
  
  if (!context) {
    throw new Error('useTranslation must be used within a TranslationProvider');
  }
  
  return context;
};
